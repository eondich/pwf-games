{"ast":null,"code":"/* eslint-disable */\nimport { ref } from 'vue';\n\n// import { onCreated } from 'vue';\n// import { useRoute } from 'vue-router';\n\nimport CharacterCard from \"../Cards/CharacterCard\";\nimport CharacterGeneratorRoller from \"./CharacterGeneratorRoller\";\nexport default {\n  components: {\n    CharacterCard,\n    CharacterGeneratorRoller\n  },\n  data() {\n    return {\n      baseUrl: 'http://localhost:3000/api/v1/character_generator',\n      characterName: \"\",\n      gameSystem: {},\n      // Want to get key from params, retrieve id, name, uses ancestry\n      loading: true\n    };\n  },\n  setup() {\n    const characterName = ref(\"\");\n    const selectedAncestry = ref(\"\");\n    const selectedClass = ref(\"\");\n    const selectedNameGender = ref(\"any\");\n    const sheetAncestry = ref(\"\");\n    const sheetClass = ref(\"\");\n    const useAncestry = true; // Reset this later\n\n    const availableAncestries = ref([]);\n    const availableClasses = ref([]);\n    const availableNameGenders = ref([]);\n    return {\n      availableAncestries,\n      availableClasses,\n      availableNameGenders,\n      characterName,\n      selectedAncestry,\n      selectedClass,\n      selectedNameGender,\n      sheetAncestry,\n      sheetClass,\n      useAncestry\n    };\n  },\n  methods: {\n    fetchGameSystem() {\n      // Testing w/ 5e, replace\n      return fetch(`${this.baseUrl}/game_system/dnd5e`, {\n        method: 'get'\n      }).then(res => {\n        return res.json();\n      }).then(res => {\n        this.gameSystem = res.game_system;\n        this.loading = false;\n      });\n    },\n    fetchAncestries() {\n      fetch(`${this.baseUrl}/ancestries/${this.gameSystem.id}`, {\n        method: 'get'\n      }).then(res => {\n        return res.json();\n      }).then(res => {\n        this.availableAncestries = res.ancestries;\n      });\n    },\n    fetchClasses() {\n      fetch(`${this.baseUrl}/player_classes/${this.gameSystem.id}`, {\n        method: 'get'\n      }).then(res => {\n        return res.json();\n      }).then(res => {\n        this.availableClasses = res.player_classes;\n      });\n    },\n    fetchNameGenders() {\n      fetch(`${this.baseUrl}/genders`, {\n        method: 'get'\n      }).then(res => {\n        return res.json();\n      }).then(res => {\n        this.availableNameGenders = res.gender_options;\n      });\n    },\n    selectAncestry(ancestryId) {\n      this.selectedAncestry = ancestryId;\n    },\n    selectClass(classId) {\n      this.selectedClass = classId;\n    },\n    selectNameGender(genderId) {\n      this.selectedNameGender = genderId;\n    },\n    generateCharacter() {\n      let ancestryId = this.selectedAncestry;\n      if (this.useAncestry) {\n        // Force a reset to the selected ancestry, if necessary\n        this.selectedAncestry = '';\n        if (this.selectedAncestry) {\n          this.sheetAncestry = this.selectedAncestry;\n          console.log(this.sheetAncestry);\n        } else {\n          const ancestryIndex = Math.floor(Math.random() * this.availableAncestries.length);\n          ancestryId = this.availableAncestries[ancestryIndex].id;\n          this.sheetAncestry = ancestryId;\n        }\n      } else {\n        ancestryId = \"none\";\n      }\n\n      // Force a reset to the selected class, if necessary\n      this.selectedClass = '';\n      if (this.selectedClass) {\n        this.sheetClass = this.selectedClass;\n      } else {\n        const classIndex = Math.floor(Math.random() * this.availableClasses.length);\n        this.sheetClass = this.availableClasses[classIndex].id;\n      }\n      this.fetchCharacterName();\n    },\n    fetchCharacterName() {\n      let url = `${this.baseUrl}/character_name/${this.gameSystem.id}/${this.selectedNameGender}`;\n      if (Number.isInteger(this.selectedAncestry)) {\n        url = url.concat(`/${this.selectedAncestry}`);\n      }\n      fetch(url, {\n        method: 'get'\n      }).then(res => {\n        return res.json();\n      }).then(res => {\n        this.characterName = res.character_name;\n      });\n    }\n  },\n  created() {\n    this.fetchGameSystem().then(() => {\n      this.fetchAncestries();\n      this.fetchClasses();\n      this.fetchNameGenders();\n    });\n  }\n};","map":{"version":3,"names":["ref","CharacterCard","CharacterGeneratorRoller","components","data","baseUrl","characterName","gameSystem","loading","setup","selectedAncestry","selectedClass","selectedNameGender","sheetAncestry","sheetClass","useAncestry","availableAncestries","availableClasses","availableNameGenders","methods","fetchGameSystem","fetch","method","then","res","json","game_system","fetchAncestries","id","ancestries","fetchClasses","player_classes","fetchNameGenders","gender_options","selectAncestry","ancestryId","selectClass","classId","selectNameGender","genderId","generateCharacter","console","log","ancestryIndex","Math","floor","random","length","classIndex","fetchCharacterName","url","Number","isInteger","concat","character_name","created"],"sources":["/Users/lappy486/Code/pwf-games/src/components/CharacterGenerators/CharacterGeneratorPage.vue"],"sourcesContent":["<template>\n  <div className=\"character-generator-page\">\n    <CharacterGeneratorRoller :availableAncestries=\"availableAncestries\"\n                              :availableClasses=\"availableClasses\"\n                              :availableGenders=\"availableNameGenders\"\n                              :loading=\"loading\"\n                              :systemName=\"gameSystem.name\"\n                              :useAncestry=\"useAncestry\"\n                              @roll=\"generateCharacter()\"\n                              @selectAncestry=\"e => selectAncestry(e)\"\n                              @selectClass=\"e => selectClass(e)\"\n                              @selectGender=\"e => selectNameGender(e)\" />\n    <CharacterCard :availableAncestries=\"availableAncestries\"\n                   :availableClasses=\"availableClasses\"\n                   :presetCharName=\"characterName\"\n                   :selectedAncestry=\"sheetAncestry\"\n                   :selectedClass=\"sheetClass\"\n                   :useAncestry=\"gameSystem.usesAncestry\" />\n    </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport { ref } from 'vue';\n\n// import { onCreated } from 'vue';\n// import { useRoute } from 'vue-router';\n\nimport CharacterCard from \"../Cards/CharacterCard\";\nimport CharacterGeneratorRoller from \"./CharacterGeneratorRoller\";\n\nexport default {\n  components: {\n    CharacterCard,\n    CharacterGeneratorRoller\n  },\n  data () {\n    return {\n      baseUrl: 'http://localhost:3000/api/v1/character_generator',\n      characterName: \"\",\n      gameSystem: {},\n      // Want to get key from params, retrieve id, name, uses ancestry\n      loading: true\n    }\n  },\n  setup () {\n    const characterName = ref(\"\");\n    const selectedAncestry = ref(\"\");\n    const selectedClass = ref(\"\");\n    const selectedNameGender = ref(\"any\");\n    const sheetAncestry = ref(\"\");\n    const sheetClass = ref(\"\");\n    const useAncestry = true; // Reset this later\n\n    const availableAncestries = ref([]);\n    const availableClasses = ref([]);\n    const availableNameGenders = ref([]);\n\n    return {\n      availableAncestries,\n      availableClasses,\n      availableNameGenders,\n      characterName,\n      selectedAncestry,\n      selectedClass,\n      selectedNameGender,\n      sheetAncestry,\n      sheetClass,\n      useAncestry\n    }\n  },\n  methods: {\n    fetchGameSystem () {\n      // Testing w/ 5e, replace\n      return fetch(`${this.baseUrl}/game_system/dnd5e`, {\n        method: 'get'\n      }).then((res) => {\n        return res.json();\n      }).then((res) => {\n        this.gameSystem = res.game_system;\n        this.loading = false;\n      })\n    },\n    fetchAncestries () {\n      fetch(`${this.baseUrl}/ancestries/${this.gameSystem.id}`, {\n        method: 'get'\n      }).then((res) => {\n        return res.json();\n      }).then((res) => {\n        this.availableAncestries = res.ancestries;\n      })\n    },\n    fetchClasses () {\n      fetch(`${this.baseUrl}/player_classes/${this.gameSystem.id}`, {\n        method: 'get'\n      }).then((res) => {\n        return res.json();\n      }).then((res) => {\n        this.availableClasses = res.player_classes;\n      })\n    },\n    fetchNameGenders () {\n      fetch(`${this.baseUrl}/genders`, {\n        method: 'get'\n      }).then((res) => {\n        return res.json();\n      }).then((res) => {\n        this.availableNameGenders = res.gender_options;\n      })\n    },\n    selectAncestry (ancestryId) {\n      this.selectedAncestry = ancestryId;\n    },\n    selectClass (classId) {\n      this.selectedClass = classId;\n    },\n    selectNameGender (genderId) {\n      this.selectedNameGender = genderId;\n    },\n    generateCharacter() {\n      let ancestryId = this.selectedAncestry;\n      \n      if (this.useAncestry) {\n        // Force a reset to the selected ancestry, if necessary\n        this.selectedAncestry = '';\n        if (this.selectedAncestry) {\n          this.sheetAncestry = this.selectedAncestry;\n          console.log(this.sheetAncestry)\n        } else {\n          const ancestryIndex = Math.floor(Math.random() * (this.availableAncestries.length))\n          ancestryId = this.availableAncestries[ancestryIndex].id\n          this.sheetAncestry = ancestryId;\n        }\n      } else {\n        ancestryId = \"none\";\n      }\n\n      // Force a reset to the selected class, if necessary\n      this.selectedClass = '';\n      if (this.selectedClass) {\n        this.sheetClass = this.selectedClass;\n      } else {\n        const classIndex = Math.floor(Math.random() * (this.availableClasses.length))\n        this.sheetClass = this.availableClasses[classIndex].id;\n      }\n\n      this.fetchCharacterName();\n    },\n    fetchCharacterName () {\n      let url = `${this.baseUrl}/character_name/${this.gameSystem.id}/${this.selectedNameGender}`\n      if (Number.isInteger(this.selectedAncestry)) {\n        url = url.concat(`/${this.selectedAncestry}`)\n      }\n      fetch(url, {\n        method: 'get'\n      }).then((res) => {\n        return res.json();\n      }).then((res) => {\n        this.characterName = res.character_name;\n      });\n    }\n  },\n  created () {\n    this.fetchGameSystem().then(() => {\n      this.fetchAncestries();\n      this.fetchClasses();\n      this.fetchNameGenders();\n    });\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"./CharacterGeneratorPage.scss\";\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}